<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BatchingRPCServer: Serving::Servable Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BatchingRPCServer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_serving.html">Serving</a></li><li class="navelem"><a class="el" href="class_serving_1_1_servable.html">Servable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_serving_1_1_servable-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Serving::Servable Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Delimits the public API for a <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> object.  
 <a href="class_serving_1_1_servable.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_servable_8hpp_source.html">Servable.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Serving::Servable:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_serving_1_1_servable.png" usemap="#Serving::Servable_map" alt=""/>
  <map id="Serving::Servable_map" name="Serving::Servable_map">
<area href="class_serving_1_1_m_x_net_servable.html" alt="Serving::MXNetServable" shape="rect" coords="0,56,152,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab22dd1fb4679d8e7ab2e9ad74280ac52"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serving_1_1_servable.html#ab22dd1fb4679d8e7ab2e9ad74280ac52">SetBatchSize</a> (const int &amp;new_size)=0</td></tr>
<tr class="memdesc:ab22dd1fb4679d8e7ab2e9ad74280ac52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the batch size of the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a>.  <a href="#ab22dd1fb4679d8e7ab2e9ad74280ac52">More...</a><br /></td></tr>
<tr class="separator:ab22dd1fb4679d8e7ab2e9ad74280ac52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a0a94b2b5fd3006745458be8aaae80"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serving_1_1_servable.html#a31a0a94b2b5fd3006745458be8aaae80">AddToBatch</a> (const TensorMessage &amp;message)=0</td></tr>
<tr class="memdesc:a31a0a94b2b5fd3006745458be8aaae80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the TensorMessage to the batch.  <a href="#a31a0a94b2b5fd3006745458be8aaae80">More...</a><br /></td></tr>
<tr class="separator:a31a0a94b2b5fd3006745458be8aaae80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a403f9efd4cee5a96f206fd9ded42d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serving_1_1_servable.html#ae2a403f9efd4cee5a96f206fd9ded42d">GetResult</a> (const std::string &amp;client_id, TensorMessage *message)=0</td></tr>
<tr class="memdesc:ae2a403f9efd4cee5a96f206fd9ded42d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the client's result. Blocks until the result is available.  <a href="#ae2a403f9efd4cee5a96f206fd9ded42d">More...</a><br /></td></tr>
<tr class="separator:ae2a403f9efd4cee5a96f206fd9ded42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2cc8c6fa59265817787a4f50d2ce7c8"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serving_1_1_servable.html#ae2cc8c6fa59265817787a4f50d2ce7c8">Bind</a> (<a class="el" href="struct_serving_1_1_bind_args.html">BindArgs</a> &amp;args)=0</td></tr>
<tr class="memdesc:ae2cc8c6fa59265817787a4f50d2ce7c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind the algorithm to the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a>.  <a href="#ae2cc8c6fa59265817787a4f50d2ce7c8">More...</a><br /></td></tr>
<tr class="separator:ae2cc8c6fa59265817787a4f50d2ce7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Delimits the public API for a <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> object. </p>
<p>In order to be used with a <a class="el" href="class_serving_1_1_t_b_server.html" title="Implements the BatchingServer::Service, providing the transport/RPC layer. ">TBServer</a> gRPC wrapper, a <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> must implement this API. </p>

<p class="definition">Definition at line <a class="el" href="_servable_8hpp_source.html#l00079">79</a> of file <a class="el" href="_servable_8hpp_source.html">Servable.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a31a0a94b2b5fd3006745458be8aaae80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a0a94b2b5fd3006745458be8aaae80">&#9670;&nbsp;</a></span>AddToBatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a> Serving::Servable::AddToBatch </td>
          <td>(</td>
          <td class="paramtype">const TensorMessage &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds the TensorMessage to the batch. </p>
<p>Deserializes the TensorMessage and adds it to the batch. Internally tracks the indices to return the correct result to each client. It is important to note that the serialization of the TensorMessage on the client side and on the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> must match for results to make any sense - a client should serialize in MXNet format for a <a class="el" href="class_serving_1_1_m_x_net_servable.html">MXNetServable</a>, for example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The TensorMessage we are requesting to process. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns any of [ReturnCodes::OK, ReturnCodes::NEED_BIND_CALL, ReturnCodes::SHAPE_INCORRECT, ReturnCodes::NEXT_BATCH, ReturnCodes::BATCH_TOO_LARGE]. </dd></dl>

<p>Implemented in <a class="el" href="class_serving_1_1_m_x_net_servable.html#a5eb286eff9090ae2485ed567f5f70780">Serving::MXNetServable</a>.</p>

</div>
</div>
<a id="ae2cc8c6fa59265817787a4f50d2ce7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2cc8c6fa59265817787a4f50d2ce7c8">&#9670;&nbsp;</a></span>Bind()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a> Serving::Servable::Bind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_serving_1_1_bind_args.html">BindArgs</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bind the algorithm to the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a>. </p>
<p>Binds the algorithm to be served to the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a>. This will have implementation specific details that means the <a class="el" href="struct_serving_1_1_bind_args.html" title="A virtual wrapper for arguments used to bind a Servable. ">BindArgs</a> implementations will vary wildly. <a class="el" href="class_serving_1_1_m_x_net_servable.html#a37366dd2ba55fd727f336623bbbc3d4b" title="Bind the algorithm to the Servable. ">MXNetServable::Bind(BindArgs&amp;)</a> has an example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>The algorithm, whether it's in a variable or stored in a file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns either ReturnCodes::OK if successful or ReturnCodes::NO_SUITABLE_BIND_ARGS if the cast is unsuccessful. </dd></dl>

<p>Implemented in <a class="el" href="class_serving_1_1_m_x_net_servable.html#a37366dd2ba55fd727f336623bbbc3d4b">Serving::MXNetServable</a>.</p>

</div>
</div>
<a id="ae2a403f9efd4cee5a96f206fd9ded42d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a403f9efd4cee5a96f206fd9ded42d">&#9670;&nbsp;</a></span>GetResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a> Serving::Servable::GetResult </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TensorMessage *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the client's result. Blocks until the result is available. </p>
<p>Finds client_id's result and stores it in message with implementation-specific serialization. It is important to note that the serialization of the TensorMessage on the client side and on the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> must match for results to make any sense - a client should serialize in MXNet format for a <a class="el" href="class_serving_1_1_m_x_net_servable.html">MXNetServable</a>, for example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client_id</td><td>A string containing a unique client identifier whose result we want to fetch. </td></tr>
    <tr><td class="paramname">message</td><td>An initialized TensorMessage that we can store the data inside of. The caller assumes responsibility for memory management. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implemented in <a class="el" href="class_serving_1_1_m_x_net_servable.html#a8f1d8e99644834c88518e33b2ed49c14">Serving::MXNetServable</a>.</p>

</div>
</div>
<a id="ab22dd1fb4679d8e7ab2e9ad74280ac52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22dd1fb4679d8e7ab2e9ad74280ac52">&#9670;&nbsp;</a></span>SetBatchSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_serving.html#a19a06f555bcdfaa53ea91896831028c3">ReturnCodes</a> Serving::Servable::SetBatchSize </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>new_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the batch size of the <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a>. </p>
<p>The <a class="el" href="class_serving_1_1_servable.html" title="Delimits the public API for a Servable object. ">Servable</a> may have a need to have the size of its batches changed during runtime - this function allows this.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_size</td><td>The new batch size of the servable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns ReturnCodes::OK if successful or ReturnCodes::NEXT_BATCH if the batch is already larger than new_size. </dd></dl>

<p>Implemented in <a class="el" href="class_serving_1_1_m_x_net_servable.html#ac5b8030d0e1873a2ff961259e7e39807">Serving::MXNetServable</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_servable_8hpp_source.html">Servable.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
